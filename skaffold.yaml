apiVersion: skaffold/v4beta2
kind: Config
build:
  artifacts:
    - image: omdemo/matchfunction
      ko:
        main: ./matchfunction
        dependencies:
          paths: ["**/*.go"]
          ignore: ["tests/**/*.go", "cmd/**/*.go"]
    - image: omdemo/testdirector
      ko:
        main: ./cmd/testdirector
        dependencies:
          paths: ["**/*.go"]
          ignore: ["tests/**/*.go"]
deploy:
  kubectl:
    defaultNamespace: open-match
manifests:
  rawYaml:
    - ./matchfunction/matchfunction.yaml
    - ./cmd/testdirector/testdirector.yaml
portForward:
  - resourceType: Service
    resourceName: open-match-frontend
    namespace: open-match
    port: 50504
    localPort: 50504
  - resourceType: Service
    resourceName: open-match-backend
    namespace: open-match
    port: 50505
    localPort: 50505
